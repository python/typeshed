from collections.abc import Sequence
from typing import Any, ClassVar

from django.contrib import admin
from django.db import models
from django.db.models import QuerySet
from django.forms import Form
from django.http import HttpRequest, HttpResponse

class RegistrationClosed(RuntimeError): ...
class ChildAdminNotRegistered(RuntimeError): ...

class PolymorphicParentModelAdmin(admin.ModelAdmin[Any]):
    base_model: type[models.Model] | None
    child_models: Sequence[type[models.Model]] | None
    polymorphic_list: bool
    add_type_template: str | Sequence[str] | None
    add_type_form: type[Form]
    pk_regex: str
    change_list_template: ClassVar[list[str]]  # type: ignore[misc]
    def register_child(self, model: type[models.Model], model_admin: type[admin.ModelAdmin[Any]]) -> None: ...
    def get_child_models(self) -> Sequence[type[models.Model]]: ...
    def get_child_type_choices(self, request: HttpRequest, action: str) -> list[tuple[int, str]]: ...
    def get_queryset(self, request: HttpRequest) -> QuerySet[Any]: ...
    def add_view(self, request: HttpRequest, form_url: str = "", extra_context: dict[str, Any] | None = None) -> HttpResponse: ...
    def change_view(
        self, request: HttpRequest, object_id: str, form_url: str = "", extra_context: dict[str, Any] | None = None
    ) -> HttpResponse: ...
    def changeform_view(
        self, request: HttpRequest, object_id: str | None = None, form_url: str = "", extra_context: dict[str, Any] | None = None
    ) -> HttpResponse: ...
    def history_view(self, request: HttpRequest, object_id: str, extra_context: dict[str, Any] | None = None) -> HttpResponse: ...
    def delete_view(self, request: HttpRequest, object_id: str, extra_context: dict[str, Any] | None = None) -> HttpResponse: ...
    def get_urls(self) -> list[Any]: ...
    def subclass_view(self, request: HttpRequest, path: str) -> HttpResponse: ...
    def add_type_view(self, request: HttpRequest, form_url: str = "") -> HttpResponse: ...
    def render_add_type_form(self, request: HttpRequest, context: dict[str, Any], form_url: str = "") -> HttpResponse: ...

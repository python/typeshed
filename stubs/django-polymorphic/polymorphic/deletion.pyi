from collections.abc import Callable, Hashable
from typing import Any

from django.db.models import Field
from django.db.models.deletion import Collector
from django.db.models.query import QuerySet

def migration_fingerprint(value: Any) -> Hashable: ...

class PolymorphicGuard:
    action: Callable[[Collector, Field[Any, Any], QuerySet[Any], str], None]
    def __init__(self, action: Callable[[Collector, Field[Any, Any], QuerySet[Any], str], None]) -> None: ...
    def __call__(self, collector: Collector, field: Field[Any, Any], sub_objs: QuerySet[Any], using: str) -> None: ...
    @property
    def migration_key(self) -> Hashable: ...
    def __eq__(self, other: object) -> bool: ...
    def __hash__(self) -> int: ...

class PolymorphicGuardSerializer:
    value: PolymorphicGuard
    def serialize(self) -> tuple[str, set[str]]: ...
